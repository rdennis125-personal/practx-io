# yaml-language-server: $schema=https://github.com/Azure/deployment-environments/releases/download/2022-11-11-preview/manifest.schema.json

name: practx-apim
summary: Deploys an Azure API Management instance with the Practx.io entitlement policy.
description: |
  Creates an Azure API Management Developer SKU instance and publishes the Practx API with the shared
  entitlement validation policy. Optionally override the policy with a custom XML document at deployment
  time.

runner: Bicep
templatePath: main.bicep

parameters:
  - id: environmentType
    name: Environment type
    type: string
    description: Dev Center environment type this deployment is for.
    required: true
    allowed:
      - DEV
      - QA1
      - PROD

  - id: location
    name: Azure region
    type: string
    description: Azure region used to deploy the environment resources.
    default: westus2

  - id: baseName
    name: Resource base name
    type: string
    description: Base name combined with the environment type to create resource names.
    default: practx

  - id: policyOverride
    name: Custom policy XML
    type: string
    description: Optional XML document that replaces the default entitlement validation policy.
    default: ""
